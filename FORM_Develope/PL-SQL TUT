
01. What is Procedure and Sequence in Oracle Programming? Procedure vs User Define Function(UDF)?
02. What/Why is PL/SQL?
03. What/Why is Trigger? Where/How it works?
04. Restriction on The Database Triggers


01.What is Procedure and Sequence in Oracle Programming? Procedure vs User Define Function(UDF)?
---------------------------------------------------------------------------------------------
Ans: 
    PROCEDURE: Is a group of PL/SQL statements that you can call by name.
    SEQUENCE: An object in Oracle that is used to generate a (unique)number sequence, specially to act as a primary key.

Procedure vs User Define Function(UDF):
---------------------------------------
 > We cannot use Procudure in SQL statements like SELECT, INSERT, UPDATE, DELETE, MERGE, and JOIN CLAUSE. but we can use them with UDF.
 > We can use transactions in SP but it is not possible in UDF.
 > Procedure compiled Execution whereas UDF is Pre-compiled Execution.
 > SP can have both table variables and temporary tables but UDF can have only table variables as it does not permit the use of temporary tables.


02.What/Why is PL/SQL?
----------------------
Ans: 
    --PL/SQL stands for Procedural Language extensions of SQL. Introduces block structure.
    --Oracle created PL/SQL that extends some limitations of SQL 


03. What/Why is Trigger? Where/How it works?
--------------------------------------------
We can also say that they are specialized stored programs which execute implicitly(পরোক্ষভাবে) when a triggering event occurs.
This means we cannot call and execute them directly instead they only get triggered by events in the database.

Why/Adv. trigger?
-----------------
We can--
01. -Enforce business rules that can’t be defined by using integrity constants.
02. -Gain strong control over the security.
03. -Collect statistical information on the table access.
04. -Generate values for derived columns such as auto increment numeric primary key.
05. -Prevent the invalid transactions Using database triggers.


These events can be anything such as:
-------------------------------------
1. A DML Statement – An Update, Insert or Delete statement executing on any table of your database. 
                      You can program your trigger to execute either BEFORE or AFTER executing your DML statement.
2. A DDL Statement – Such as CREATE or ALTER. 
                      These triggers can also be executed either BEFORE or AFTER the execution of your DDL statement. 
                      These triggers are generally used by DBAs for auditing purpose (keep an eye on the various changes on your schema).
3. A system event. – I mean shut down or startup of your database.
4. A User Events   – Such as log off or log on onto your database. You can create a trigger which will either execute before or after the event. 
                      Furthermore, it will record the information such as time of event occur, the username who created it.


04.Restriction on The Database Triggers:
----------------------------------------
-> The maximum size of the database trigger body must not exceed 32,760 bytes. This is because triggers’ bodies are stored in LONG datatypes columns.
-> A trigger may not issue transaction control statements or TCL statements such as COMMIT, ROLLBACK or SAVEPOINT. All operations performed when the trigger fires, become part of a transaction. Therefore whenever this transaction is rolled back or committed it leads to the respective rolling back or committing of the operations performed. 
-> Any function or procedure called by a database trigger may not issue a transactional control statement. That is unless it contains an autonomous transaction.
-> Declaring LONG or LONG RAW variable is not permissible in the body of the trigger.


EXAMLE TRIGGER:
---------------
CREATE TABLE superheroes (  sh_name VARCHAR2 (15));
--

CREATE OR REPLACE TRIGGER tr_superheroes
BEFORE INSERT OR DELETE OR UPDATE ON superheroes
FOR EACH ROW
ENABLE
DECLARE
  v_user  VARCHAR2(15);
BEGIN

  SELECT 
    user INTO v_user FROM dual;
  IF INSERTING THEN
    DBMS_OUTPUT.PUT_LINE('one line inserted by '||v_user);
  ELSIF DELETING THEN
    DBMS_OUTPUT.PUT_LINE('one line Deleted by '||v_user);
  ELSIF UPDATING THEN
    DBMS_OUTPUT.PUT_LINE('one line Updated by '||v_user);
  END IF;
END;
/


--INSERT INTO superheroes VALUES ('Ironman');
--UPDATE superheroes SET SH_NAME = ‘Superman’ WHERE SH_NAME='Ironman';
--DELETE FROM superheroes WHERE sh_name = 'Superman';


VARIBLE DECLARATION:
--------------------
DECLARE
  v_user_name user_info.user_name%TYPE;
  hire_date := to_date('19700101','YYYYMMDD');   /to assign a value or a variable to another use :=
  ERR_MESS varchar2(200);
BEGIN
  SELECT user_name INTO v_user_name
  FROM user_info
  WHERE user_id = :CONTROL.USERNAME;  // To receive data from FORM for query
  /* To show data to FORM's field*/
  :ERR_MESS:=v_user_name;
END;









