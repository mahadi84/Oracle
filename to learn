

10.4 (ADV. INDEXING)
====================

SELECT * FROM USER_INDEXES
create index lname_index on EMPLOYEES(lname) UNUSABLE ;
create index fname_index on EMPLOYEES(fname) ;

select * from user_segments
where segment_name IN ( 'EMPLOYEES','EMPLOYEES_PK' ,'FNAME_INDEX','LNAME_INDEX');

alter index LNAME_INDEX REBUILD

select * from user_segments
where segment_name IN ( 'EMPLOYEES','EMPLOYEES_PK' ,'FNAME_INDEX','LNAME_INDEX'

10.5/ 10.6 (Basic and Adv. Compression)
==================================
--basic compression 
--With basic compression, the Oracle Database server compresses data at the time of performing bulk load using
--operations such as direct loads or CREATE TABLE AS SELECT
--Is recommended for bulk loading data warehouses

show user;
show con_name;

select * from dba_objects
where rownum<10000;

--case 1
--no compression
create table test_01
as
select * from dba_objects where rownum <= 10000;

SELECT DBMS_METADATA.GET_DDL('TABLE','TEST_01') FROM dual;

ANALYZE TABLE TEST_01 COMPUTE statistics

select  blocks, pct_free , compression, compress_for
from    user_tables
where   table_name = 'TEST_01';


10.7 (TABLESPACE-FULL-ALERT-SET)
==================================
SELECT df.tablespace_name tablespace, fs.bytes free, df.bytes, 
fs.bytes*100/ df.bytes PCT_FREE
FROM dba_data_files df ,dba_free_space fs
WHERE df.tablespace_name = fs.tablespace_name
AND df.tablespace_name = 'TBSALERT';

begin
DBMS_SERVER_ALERT.SET_THRESHOLD( 
metrics_id => dbms_server_alert.tablespace_pct_full,    
warning_operator =>DBMS_SERVER_ALERT.OPERATOR_GE, 
warning_value => '55', 
critical_operator =>DBMS_SERVER_ALERT.OPERATOR_GE, 
critical_value => '70', 
observation_period => 1,
consecutive_occurrences => 1, 
instance_name => 'orcl', 
object_type =>DBMS_SERVER_ALERT.OBJECT_TYPE_TABLESPACE, 
object_name => 'TBSALERT');
end;

SELECT warning_value, critical_value
FROM dba_thresholds 
WHERE object_name='TBSALERT';



